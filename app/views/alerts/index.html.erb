<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
  <h1 class="text-3xl font-bold text-gray-900 mb-8">Mes alertes</h1>

  <% if @alerts.any? %>
    <div class="space-y-4">
      <% @alerts.each do |alert| %>
        <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 <%= alert.seen? ? 'opacity-60' : '' %>">
          <div class="flex flex-col md:flex-row gap-6">
            <!-- Photo placeholder -->
            <div class="w-full md:w-48 h-32 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0">
              <% if alert.listing.first_photo %>
                <img src="<%= alert.listing.first_photo %>" class="w-full h-full object-cover rounded-lg" alt="">
              <% else %>
                <span class="text-4xl">üè†</span>
              <% end %>
            </div>

            <!-- Details -->
            <div class="flex-1">
              <div class="flex justify-between items-start">
                <div>
                  <h3 class="font-bold text-lg text-gray-900"><%= alert.listing.title %></h3>
                  <p class="text-gray-600 text-sm"><%= alert.listing.city %> <%= alert.listing.postal_code %> ¬∑ <%= alert.listing.neighborhood %></p>
                </div>
                <% if alert.listing.score %>
                  <% color = alert.listing.score >= 70 ? 'green' : alert.listing.score >= 40 ? 'yellow' : 'red' %>
                  <span class="bg-<%= color %>-100 text-<%= color %>-700 text-sm font-bold px-3 py-1 rounded-full">
                    <%= alert.listing.score %>/100
                  </span>
                <% end %>
              </div>

              <div class="flex flex-wrap gap-4 mt-3 text-sm">
                <span class="font-bold text-primary-600 text-lg"><%= alert.listing.price %> ‚Ç¨/mois</span>
                <span class="text-gray-500"><%= alert.listing.surface %> m¬≤</span>
                <span class="text-gray-500"><%= alert.listing.rooms %> pi√®ce(s)</span>
                <% if alert.listing.dpe_rating %>
                  <span class="text-gray-500">DPE: <%= alert.listing.dpe_rating %></span>
                <% end %>
              </div>

              <div class="flex items-center gap-4 mt-4">
                <a href="<%= listing_path(alert.listing) %>" class="bg-primary-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-primary-700">Voir le d√©tail</a>
                <a href="<%= new_auto_reply_path(listing_id: alert.listing.id) if false %>" class="border border-primary-600 text-primary-600 px-4 py-2 rounded-lg text-sm font-medium hover:bg-primary-50">R√©pondre automatiquement</a>
                <% unless alert.seen? %>
                  <%= button_to "Marquer comme vu", mark_seen_alert_path(alert), method: :patch, class: "text-sm text-gray-500 hover:text-gray-700" %>
                <% end %>
                <span class="text-xs text-gray-400 ml-auto"><%= alert.listing.platform %> ¬∑ <%= time_ago_in_words(alert.created_at) %></span>
              </div>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-16 text-center">
      <span class="text-6xl mb-4 block">üîî</span>
      <p class="text-gray-500 text-lg">Aucune alerte pour le moment</p>
      <p class="text-gray-400 mt-2">Les alertes appara√Ætront ici d√®s qu'un logement correspond √† vos crit√®res.</p>
    </div>
  <% end %>
</div>
